<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genibi Mental/Health Care Services</title>
    <meta name="description" content="GENIBI - Professional mental health application with 24/7 helpline support">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <!-- Genibi Calm Health Theme -->
    <style id="genibi-calm-theme">
      :root { --color-bg:#f5faff; --color-surface:#ffffff; --color-text:#0e1b2e; --color-muted:#4b5d6e; --color-primary:#00b3a4; --color-primary-600:#00a792; --color-primary-100:#e6fbf7; --color-secondary:#2f80ff; --color-secondary-100:#eef5ff; --color-accent:#2dd6c4; --color-accent-100:#e9fffb; --color-warm-accent:#ff7f66; --radius-sm:8px; --radius-md:14px; --radius-lg:22px; --shadow-sm:0 2px 8px rgba(47,128,255,0.10); --shadow-md:0 8px 24px rgba(47,128,255,0.16); --shadow-lg:0 16px 40px rgba(47,128,255,0.20); }
      html,body{background:var(--color-bg);color:var(--color-text);} h1,h2,h3,h4{color:var(--color-text);} p,small,label,span{color:var(--color-muted);} .card,.panel,.container,.modal-container,.widget{background:var(--color-surface);border-radius:var(--radius-md);box-shadow:var(--shadow-sm);} .modal-container{border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);} input,select,textarea{border-radius:var(--radius-sm);border:1px solid #d7e3ec;background:#fcfefe;color:var(--color-text);} input:focus,select:focus,textarea:focus{outline:none;border-color:var(--color-secondary);box-shadow:0 0 0 3px var(--color-secondary-100);} .btn,button{border-radius:var(--radius-md);border:none;padding:10px 16px;font-weight:600;box-shadow:var(--shadow-sm);} .btn-primary{background: var(--color-primary);color:#fff;box-shadow:0 8px 20px rgba(47,128,255,0.25);} .btn-primary:hover{transform: translateY(-1px);background: var(--color-primary);box-shadow:0 12px 28px rgba(47,128,255,0.30);} .btn-secondary{background:var(--color-secondary);color:#fff;} .btn-secondary:hover{filter:brightness(0.95);} .btn-accent{background:var(--color-accent);color:#fff;} .btn-accent:hover{background:#25c7b9;} .btn-warm{background:var(--color-warm-accent);color:#fff;} .btn-warm:hover{filter:brightness(0.95);} .chatbot-container .modal-header{background:var(--color-surface);border-bottom:1px solid #eaf3ee;} 
    </style>
    
    <!-- Google Identity Services & Firebase SDKs -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-container">
            <div class="health-icon-animation">
                <i class="fas fa-heartbeat"></i>
            </div>
            <div class="loading-text">
                <h2>Genibi Mental/Health Care Services</h2>
                <p>Loading your complete health companion...</p>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Authentication Container -->
    <div id="auth-container" class="auth-container hidden">
        <div class="auth-wrapper">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="logo">
                        <i class="fas fa-heartbeat"></i>
                        <span>Genibi Health</span>
                    </div>
                    <h2>Sign in to Genibi</h2>
                    <p>Caring, calm, and professional mental health support</p>
                </div>

                <div class="auth-options">
                    <!-- Login Form -->
                    <form id="loginForm" class="auth-form active" novalidate>
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input id="loginEmail" type="email" placeholder="Enter your email" required autocomplete="email">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <div class="password-input">
                                <input id="loginPassword" type="password" placeholder="Enter your password" required autocomplete="current-password">
                                <button type="button" class="password-toggle" onclick="togglePassword('loginPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-options">
                            <label class="checkbox-container" for="rememberMe">
                                <input type="checkbox" id="rememberMe">
                                <span class="checkmark" aria-hidden="true"></span>
                                <span>Remember me</span>
                            </label>
                            <a href="#" class="forgot-password" id="forgotPasswordLink">Forgot password?</a>
                        </div>
                        <div id="loginError" class="form-alert error hidden" role="alert" aria-live="polite"></div>
                        <button type="submit" class="btn btn-primary btn-full">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                        <div class="auth-divider"><span>OR</span></div>
                        <button type="button" class="btn btn-google btn-full" onclick="signInWithGoogle()">
                            <i class="fab fa-google"></i> Sign in with Google
                        </button>
                        <div class="auth-footer">
                            <p>Don't have an account? <a href="#" class="link" onclick="showSignup()">Sign Up</a></p>
                            <a class="btn btn-warm btn-full" href="tel:+2348060270792">
                                <i class="fas fa-phone"></i> 24/7 Support: +234 806 027 0792
                            </a>
                        </div>
                    </form>

                    <!-- Signup Form -->
                    <form id="signupForm" class="auth-form" novalidate>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="firstName">First Name</label>
                                <input id="firstName" type="text" placeholder="First name" required>
                            </div>
                            <div class="form-group">
                                <label for="lastName">Last Name</label>
                                <input id="lastName" type="text" placeholder="Last name" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input id="signupEmail" type="email" placeholder="Enter your email" required autocomplete="email">
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <div class="password-input">
                                <input id="signupPassword" type="password" placeholder="Create a password" required oninput="checkPasswordStrength()" autocomplete="new-password">
                                <button type="button" class="password-toggle" onclick="togglePassword('signupPassword')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="strength-indicator">
                                <div class="strength-bar"><div class="strength-fill"></div></div>
                                <small class="strength-text">Password strength: Weak</small>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input id="confirmPassword" type="password" placeholder="Confirm your password" required oninput="validatePasswordMatch()" autocomplete="new-password">
                        </div>
                        <div class="form-group">
                            <label class="checkbox">
                                <input type="checkbox" id="agreeTerms" required>
                                I agree to the Terms and Privacy Policy
                            </label>
                        </div>
                        <div id="signupError" class="form-alert error hidden" role="alert" aria-live="polite"></div>
                        <button type="submit" class="btn btn-primary btn-full">
                            <i class="fas fa-user-plus"></i> Create Account
                        </button>
                        <div class="auth-divider"><span>OR</span></div>
                        <button type="button" class="btn btn-google btn-full" onclick="signInWithGoogle()">
                            <i class="fab fa-google"></i> Sign up with Google
                        </button>
                        <div class="auth-footer">
                            <p>Already have an account? <a href="#" class="link" onclick="showLogin()">Login</a></p>
                            <a class="btn btn-warm btn-full" href="tel:+2348060270792">
                                <i class="fas fa-phone"></i> 24/7 Support: +234 806 027 0792
                            </a>
                        </div>
                    </form>

                    <!-- Quick start demo option -->
                    <div class="quick-demo">
                        <button class="btn btn-accent btn-full" onclick="demoSignUp()">
                            <i class="fas fa-play"></i> Try Demo Mode
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="main-app" class="main-app hidden">
        <!-- Header / Navigation -->
        <header class="navbar">
            <div class="nav-container">
                <a class="nav-brand" href="#dashboard">
                    <i class="fas fa-heartbeat"></i>
                    <span>Genibi Health</span>
                </a>

                <div class="header-search" role="search">
                    <i class="fas fa-search"></i>
                    <input type="search" placeholder="Search care, records, appointments..." aria-label="Search">
                </div>

                <nav id="nav-menu" class="nav-menu">
                    <a href="#dashboard" class="nav-link active">Dashboard</a>
                    <a href="#health-assistant" class="nav-link">Assistant</a>
                    <a href="#vital-signs" class="nav-link">Vitals</a>
                    <a href="#appointments" class="nav-link">Appointments</a>
                    <a href="#medications" class="nav-link">Medications</a>
                    <a href="#mood-tracker" class="nav-link">Mood</a>
                </nav>

                <div class="nav-user">
                    <div class="user-avatar" title="Account">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-menu">
                        <a href="#settings">Settings</a>
                        <a href="#logout" onclick="logout()">Logout</a>
                    </div>
                </div>

                <div class="nav-toggle" onclick="document.getElementById('nav-menu').classList.toggle('mobile-active')">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </header>

        <!-- Dashboard -->
        <main class="dashboard">
            <div class="dashboard-header">
                <h1>Your Health Dashboard</h1>
                <p>Monitor your health, book appointments, and access 24/7 support</p>
            </div>

            <!-- Gemini Metrics -->
            <section class="metrics-grid" aria-label="Key health metrics">
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-face-smile"></i></div>
                    <div class="metric-info">
                        <h4>Mood Score</h4>
                        <div class="metric-value">72</div>
                        <div class="metric-sub">Good ‚Ä¢ last 24h</div>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-pills"></i></div>
                    <div class="metric-info">
                        <h4>Active Prescriptions</h4>
                        <div class="metric-value">3</div>
                        <div class="metric-sub">2 reminders today</div>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-calendar-check"></i></div>
                    <div class="metric-info">
                        <h4>Next Appointment</h4>
                        <div class="metric-value">Tue 2:30 PM</div>
                        <div class="metric-sub">Psychosocial support (CFID)</div>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-heartbeat"></i></div>
                    <div class="metric-info">
                        <h4>Vitals Logged</h4>
                        <div class="metric-value">5</div>
                        <div class="metric-sub">This week</div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <div class="quick-actions" aria-label="Quick actions">
                <button class="action-btn btn-tonal" onclick="openAppointments()"><i class="fas fa-calendar-plus"></i> Book appointment</button>
                <button class="action-btn btn-tonal" onclick="openVitalSigns()"><i class="fas fa-stethoscope"></i> Log vitals</button>
                <button class="action-btn btn-tonal" onclick="openChatbot()"><i class="fas fa-robot"></i> Ask assistant</button>
                <button class="action-btn btn-tonal" onclick="openMedications()"><i class="fas fa-capsules"></i> Update meds</button>
            </div>

            <div class="dashboard-grid">
                <div class="health-card ai-assistant-card">
                    <div class="card-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="card-content">
                        <h3>Genibi AI Health Assistant</h3>
                        <p>Smarter, conversational guidance across mental and physical health</p>
                        <button class="card-btn assistant-toggle" aria-expanded="false" aria-controls="assistant-inline">Expand Chat</button>
                        <div id="assistant-inline" class="assistant-inline" aria-hidden="true">
                            <div id="assistant-inline-messages" class="assistant-inline-messages" aria-live="polite"></div>
                            <div class="assistant-inline-input">
                                <input type="text" id="assistant-inline-input" placeholder="Type a quick message..." aria-label="Type a quick message">
                                <button class="send-inline-btn" type="button" aria-label="Send">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                                <button class="open-full-btn" type="button" onclick="openChatbot()" aria-label="Open full assistant">Full Assistant</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="health-card vital-card" onclick="openVitalSigns()">
                    <div class="card-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="card-content">
                        <h3>Vital Signs (Log & View)</h3>
                        <p>Record heart rate, blood pressure, temperature and trends</p>
                        <button class="card-btn">View Details</button>
                    </div>
                </div>

                <div class="health-card appointments-card" onclick="openAppointments()">
                    <div class="card-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="card-content">
                        <h3>Appointments for Psychosocial Support at CFID</h3>
                        <p>Book and manage sessions at CFID (Center for Initiative & Development)</p>
                        <button class="card-btn">Book Now</button>
                    </div>
                </div>

                <div class="health-card medications-card" onclick="openMedications()">
                    <div class="card-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <div class="card-content">
                        <h3>Medications & Reminders</h3>
                        <p>Track prescriptions and set friendly reminder alerts</p>
                        <button class="card-btn">Manage</button>
                    </div>
                </div>

                <div class="health-card emergency-card">
                    <div class="card-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="card-content">
                        <h3>Emergency Support</h3>
                        <p>24/7 mental health crisis support</p>
                        <a href="tel:+2348060270792" class="card-btn emergency-btn">
                            Call Now
                        </a>
                    </div>
                </div>

                <div class="health-card mood-card" onclick="openMoodTracker()">
                    <div class="card-icon">
                        <i class="fas fa-smile"></i>
                    </div>
                    <div class="card-content">
                        <h3>Mood Tracker</h3>
                        <p>Track your daily mood and emotional wellness</p>
                        <button class="card-btn">Track Mood</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Feature Modal -->
    <div id="feature-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modal-title">Feature</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-content" id="modal-content">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Chatbot Modal -->
    <div id="chatbot-modal" class="modal-overlay hidden">
        <div class="modal-container chatbot-container">
            <div class="modal-header">
                <h3>ü§ñ Genibi AI Health Assistant (GPT-powered)</h3>
                <button class="modal-close" onclick="closeChatbot()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-content">
                <div id="chatbot-messages" class="chatbot-messages">
                    <!-- Chat messages will appear here -->
                </div>
                <div class="chatbot-input-container">
                    <input type="text" id="chatbot-input" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
                    <button onclick="sendChatMessage()" class="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="data-manager.js"></script>
    <script src="auth.js"></script>
    <script src="app.js"></script>
</body>
</html>
